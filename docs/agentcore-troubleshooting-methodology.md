# AgentCore èª¿æŸ»ãƒ»ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ‰‹æ³•

AgentCore ã®å•é¡Œè§£æ±ºã‚„æ–°æ©Ÿèƒ½ç™ºè¦‹ã®ãŸã‚ã®ç³»çµ±çš„ãªèª¿æŸ»æ‰‹æ³•ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã§ã™ã€‚

## ğŸ“‹ ç›®æ¬¡

- [åŸºæœ¬çš„ãªèª¿æŸ»ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ](#åŸºæœ¬çš„ãªèª¿æŸ»ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ)
- [æƒ…å ±æºã®å„ªå…ˆé †ä½](#æƒ…å ±æºã®å„ªå…ˆé †ä½)
- [å…·ä½“çš„ãªèª¿æŸ»æ‰‹é †](#å…·ä½“çš„ãªèª¿æŸ»æ‰‹é †)
- [å•é¡Œè§£æ±ºã®ãƒ‘ã‚¿ãƒ¼ãƒ³](#å•é¡Œè§£æ±ºã®ãƒ‘ã‚¿ãƒ¼ãƒ³)
- [ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£](#ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£)
- [èª¿æŸ»ãƒ„ãƒ¼ãƒ«ã¨ã‚³ãƒãƒ³ãƒ‰](#èª¿æŸ»ãƒ„ãƒ¼ãƒ«ã¨ã‚³ãƒãƒ³ãƒ‰)

## ğŸ” åŸºæœ¬çš„ãªèª¿æŸ»ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

### ç³»çµ±çš„èª¿æŸ»ã®4ã‚¹ãƒ†ãƒƒãƒ—

1. **å•é¡Œã®ç‰¹å®šã¨ä»®èª¬ç«‹æ¡ˆ**
2. **æƒ…å ±åé›†ã¨æ¤œè¨¼**
3. **è§£æ±ºç­–ã®å®Ÿè£…**
4. **çµæœã®ç¢ºèªã¨æ–‡æ›¸åŒ–**

### èª¿æŸ»ã®å¿ƒæ§‹ãˆ

- **ä»®å®šã‚’ç–‘ã†**: ã€Œå‹•ä½œã™ã‚‹ã¯ãšã€ã§ã¯ãªãã€Œå®Ÿéš›ã«å‹•ä½œã™ã‚‹ã‹ã€ã‚’ç¢ºèª
- **æ®µéšçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**: è¤‡é›‘ãªå•é¡Œã‚’å°ã•ãªéƒ¨åˆ†ã«åˆ†è§£
- **è¨˜éŒ²ã‚’æ®‹ã™**: èª¿æŸ»éç¨‹ã¨çµæœã‚’å¿…ãšè¨˜éŒ²
- **å†ç¾æ€§ã‚’é‡è¦–**: ä»–ã®äººãŒåŒã˜æ‰‹é †ã§åŒã˜çµæœã‚’å¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«

## ğŸ“Š æƒ…å ±æºã®å„ªå…ˆé †ä½

### 1. å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆä¿¡é ¼åº¦: â˜…â˜…â˜…â˜…â˜…ï¼‰

```bash
# AWS å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
https://docs.aws.amazon.com/bedrock/

# AgentCore é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
https://docs.aws.amazon.com/bedrock/latest/userguide/agents.html
```

**ç‰¹å¾´**:
- æœ€ã‚‚ä¿¡é ¼ã§ãã‚‹æƒ…å ±æº
- ãŸã ã—ã€æœ€æ–°æ©Ÿèƒ½ãŒåæ˜ ã•ã‚Œã¦ã„ãªã„å ´åˆãŒã‚ã‚‹
- åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•ã«é‡ç‚¹

### 2. CLI ãƒ˜ãƒ«ãƒ—ï¼ˆä¿¡é ¼åº¦: â˜…â˜…â˜…â˜…â˜…ï¼‰

```bash
# åŸºæœ¬ãƒ˜ãƒ«ãƒ—
agentcore --help

# ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ãƒ˜ãƒ«ãƒ—
agentcore launch --help
agentcore configure --help
agentcore status --help
agentcore invoke --help

# ç‰¹å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ¤œç´¢
agentcore launch --help | grep -i env
agentcore launch --help | grep -i region
```

**ç‰¹å¾´**:
- å®Ÿè£…ã¨å®Œå…¨ã«ä¸€è‡´
- æœ€æ–°ã®æ©Ÿèƒ½ã¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’åæ˜ 
- ä½¿ç”¨ä¾‹ã‚„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒæ˜è¨˜

### 3. ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ï¼ˆä¿¡é ¼åº¦: â˜…â˜…â˜…â˜…â˜†ï¼‰

```bash
# AgentCore CLI ã®å®Ÿè£…ç¢ºèª
find /Users/$(whoami)/.pyenv/versions/*/lib/python*/site-packages/bedrock_agentcore_starter_toolkit -name "*.py" | head -10

# ç‰¹å®šæ©Ÿèƒ½ã®æ¤œç´¢
grep -r "env" /Users/$(whoami)/.pyenv/versions/*/lib/python*/site-packages/bedrock_agentcore_starter_toolkit/cli/

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹é€ ç¢ºèª
find /Users/$(whoami)/.pyenv/versions/*/lib/python*/site-packages/bedrock_agentcore_starter_toolkit -name "*schema*" -o -name "*config*"
```

**ç‰¹å¾´**:
- å®Ÿè£…ã®è©³ç´°ã‚’ç†è§£å¯èƒ½
- éš ã‚ŒãŸæ©Ÿèƒ½ã‚„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç™ºè¦‹
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ä»•çµ„ã¿ã‚’æŠŠæ¡

### 4. CloudWatch ãƒ­ã‚°ï¼ˆä¿¡é ¼åº¦: â˜…â˜…â˜…â˜…â˜†ï¼‰

```bash
# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°ç›£è¦–
aws logs tail /aws/bedrock-agentcore/runtimes/agent_main-4h7OvMAtVL-DEFAULT --follow

# ç‰¹å®šæœŸé–“ã®ãƒ­ã‚°æ¤œç´¢
aws logs filter-log-events \
  --log-group-name "/aws/bedrock-agentcore/runtimes/agent_main-4h7OvMAtVL-DEFAULT" \
  --start-time $(date -v-1H +%s)000 \
  --region us-east-1

# ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®æŠ½å‡º
aws logs filter-log-events \
  --log-group-name "/aws/bedrock-agentcore/runtimes/agent_main-4h7OvMAtVL-DEFAULT" \
  --filter-pattern "ERROR" \
  --start-time $(date -v-1H +%s)000 \
  --region us-east-1
```

**ç‰¹å¾´**:
- å®Ÿéš›ã®å‹•ä½œçŠ¶æ³ã‚’ç¢ºèª
- ã‚¨ãƒ©ãƒ¼ã®è©³ç´°æƒ…å ±ã‚’å–å¾—
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æƒ…å ±ã®åˆ†æ

### 5. ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ»ãƒ•ã‚©ãƒ¼ãƒ©ãƒ ï¼ˆä¿¡é ¼åº¦: â˜…â˜…â˜…â˜†â˜†ï¼‰

- AWS re:Post
- Stack Overflow
- GitHub Issues
- Reddit (r/aws)

**ç‰¹å¾´**:
- å®Ÿéš›ã®ä½¿ç”¨ä¾‹ã¨å•é¡Œè§£æ±ºäº‹ä¾‹
- éå…¬å¼ã ãŒå®Ÿç”¨çš„ãªæƒ…å ±
- æƒ…å ±ã®æ­£ç¢ºæ€§ã¯è¦æ¤œè¨¼

## ğŸ”§ å…·ä½“çš„ãªèª¿æŸ»æ‰‹é †

### æ–°æ©Ÿèƒ½ãƒ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ç™ºè¦‹

#### 1. CLI ãƒ˜ãƒ«ãƒ—ã®ç³»çµ±çš„ç¢ºèª

```bash
# å…¨ä½“æ§‹é€ ã®æŠŠæ¡
agentcore --help

# å„ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®è©³ç´°ç¢ºèª
for cmd in configure launch status invoke; do
  echo "=== $cmd ==="
  agentcore $cmd --help
  echo
done

# ç‰¹å®šã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®æ¤œç´¢
agentcore launch --help | grep -E "(env|environment|variable|config)"
```

#### 2. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹é€ åˆ†æ

```bash
# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€ç¢ºèª
find . -name ".bedrock_agentcore.yaml" -o -name "*.yaml" | grep -v node_modules

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ç¢ºèª
cat app/agentcore/.bedrock_agentcore.yaml

# ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèªï¼ˆå¯èƒ½ãªè¨­å®šé …ç›®ã‚’æŠŠæ¡ï¼‰
find /Users/$(whoami)/.pyenv/versions/*/lib/python*/site-packages/bedrock_agentcore_starter_toolkit -name "*schema*"
```

#### 3. å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã®èª¿æŸ»

```bash
# ç’°å¢ƒå¤‰æ•°é–¢é€£ã®å®Ÿè£…ç¢ºèª
grep -r "env" /Users/$(whoami)/.pyenv/versions/*/lib/python*/site-packages/bedrock_agentcore_starter_toolkit/cli/ | head -10

# è¨­å®šå‡¦ç†ã®å®Ÿè£…ç¢ºèª
grep -r "config" /Users/$(whoami)/.pyenv/versions/*/lib/python*/site-packages/bedrock_agentcore_starter_toolkit/operations/ | head -10

# ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ç¢ºèª
grep -r "error\|exception" /Users/$(whoami)/.pyenv/versions/*/lib/python*/site-packages/bedrock_agentcore_starter_toolkit/cli/ | head -5
```

### å•é¡Œã®è¨ºæ–­æ‰‹é †

#### 1. ç—‡çŠ¶ã®ç‰¹å®š

```bash
# åŸºæœ¬çŠ¶æ…‹ã®ç¢ºèª
agentcore status

# æœ€è¿‘ã®ãƒ­ã‚°ç¢ºèª
aws logs tail /aws/bedrock-agentcore/runtimes/agent_main-4h7OvMAtVL-DEFAULT --since 10m

# ã‚¨ãƒ©ãƒ¼ã®æœ‰ç„¡ç¢ºèª
aws logs filter-log-events \
  --log-group-name "/aws/bedrock-agentcore/runtimes/agent_main-4h7OvMAtVL-DEFAULT" \
  --filter-pattern "ERROR" \
  --start-time $(date -v-30M +%s)000 \
  --region us-east-1
```

#### 2. ç’°å¢ƒã®ç¢ºèª

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒå¤‰æ•°ã®ç¢ºèª
python -c "
import os
from dotenv import load_dotenv
load_dotenv()
for key in ['AWS_DEFAULT_REGION', 'POWER_AUTOMATE_WEBHOOK_URL']:
    value = os.getenv(key)
    print(f'{key}: {\"SET\" if value else \"NOT SET\"}')
"

# AWS èªè¨¼æƒ…å ±ã®ç¢ºèª
aws sts get-caller-identity

# AgentCore è¨­å®šã®ç¢ºèª
cat app/agentcore/.bedrock_agentcore.yaml | grep -E "(name|region|execution_role)"
```

#### 3. æ®µéšçš„ãƒ†ã‚¹ãƒˆ

```bash
# 1. åŸºæœ¬çš„ãªæ¥ç¶šãƒ†ã‚¹ãƒˆ
agentcore invoke '{"prompt": "Hello"}'

# 2. ç’°å¢ƒå¤‰æ•°ä¾å­˜æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ
agentcore invoke '{"prompt": "AWS SAPè©¦é¨“å•é¡Œã‚’1å•ç”Ÿæˆã—ã¦ãã ã•ã„"}'

# 3. ãƒ­ã‚°ã§ã®å‹•ä½œç¢ºèª
aws logs filter-log-events \
  --log-group-name "/aws/bedrock-agentcore/runtimes/agent_main-4h7OvMAtVL-DEFAULT" \
  --filter-pattern "Teams" \
  --start-time $(date -v-5M +%s)000 \
  --region us-east-1
```

## ğŸ¯ å•é¡Œè§£æ±ºã®ãƒ‘ã‚¿ãƒ¼ãƒ³

### ãƒ‘ã‚¿ãƒ¼ãƒ³1: è¨­å®šé–¢é€£ã®å•é¡Œ

**ç—‡çŠ¶**: æ©Ÿèƒ½ãŒå‹•ä½œã—ãªã„ã€è¨­å®šãŒåæ˜ ã•ã‚Œãªã„

**èª¿æŸ»æ‰‹é †**:
1. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª
2. ç’°å¢ƒå¤‰æ•°ã®ç¢ºèª
3. CLI ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ç¢ºèª
4. ãƒ­ã‚°ã§ã®è¨­å®šå€¤ç¢ºèª

**ä¾‹**: ç’°å¢ƒå¤‰æ•°è¨­å®šå•é¡Œ
```bash
# å•é¡Œ: POWER_AUTOMATE_WEBHOOK_URL ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„
# èª¿æŸ»: CLI ãƒ˜ãƒ«ãƒ—ã§ --env ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç™ºè¦‹
agentcore launch --help | grep env

# è§£æ±º: --env ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
agentcore launch --env POWER_AUTOMATE_WEBHOOK_URL="<url>" --auto-update-on-conflict
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³2: æ¨©é™é–¢é€£ã®å•é¡Œ

**ç—‡çŠ¶**: ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦ã€èªè¨¼ã‚¨ãƒ©ãƒ¼

**èª¿æŸ»æ‰‹é †**:
1. IAM ãƒ­ãƒ¼ãƒ«ã®ç¢ºèª
2. ãƒãƒªã‚·ãƒ¼ã®ç¢ºèª
3. ãƒªã‚½ãƒ¼ã‚¹ã®å­˜åœ¨ç¢ºèª
4. CloudTrail ãƒ­ã‚°ã®ç¢ºèª

**ä¾‹**: ECR ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™å•é¡Œ
```bash
# å•é¡Œ: ECR ã¸ã®ãƒ—ãƒƒã‚·ãƒ¥ãŒå¤±æ•—
# èª¿æŸ»: IAM ãƒ­ãƒ¼ãƒ«ã®æ¨©é™ç¢ºèª
aws iam list-attached-role-policies --role-name BedrockAgentCoreExecutionRole-development

# è§£æ±º: å¿…è¦ãªæ¨©é™ã®è¿½åŠ 
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³3: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é–¢é€£ã®å•é¡Œ

**ç—‡çŠ¶**: æ¥ç¶šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€DNS è§£æ±ºå¤±æ•—

**èª¿æŸ»æ‰‹é †**:
1. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šã®ç¢ºèª
2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã®ç¢ºèª
3. VPC è¨­å®šã®ç¢ºèª
4. DNS è¨­å®šã®ç¢ºèª

### ãƒ‘ã‚¿ãƒ¼ãƒ³4: ãƒªã‚½ãƒ¼ã‚¹ä¸è¶³ã®å•é¡Œ

**ç—‡çŠ¶**: ãƒ¡ãƒ¢ãƒªä¸è¶³ã€CPU ä½¿ç”¨ç‡é«˜é¨°

**èª¿æŸ»æ‰‹é †**:
1. CloudWatch ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®ç¢ºèª
2. ãƒ­ã‚°ã§ã®ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨çŠ¶æ³ç¢ºèª
3. è¨­å®šå€¤ã®æœ€é©åŒ–
4. ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°è¨­å®šã®ç¢ºèª

## ğŸ“š ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£

### ã‚±ãƒ¼ã‚¹1: ç’°å¢ƒå¤‰æ•°è¨­å®šæ–¹æ³•ã®ç™ºè¦‹

**èƒŒæ™¯**: 
- ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã¯ `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã§ç’°å¢ƒå¤‰æ•°ãŒå‹•ä½œ
- AgentCore Runtime ã§ã¯ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„
- å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ˜ç¢ºãªè¨˜è¼‰ãªã—

**èª¿æŸ»ãƒ—ãƒ­ã‚»ã‚¹**:

1. **å•é¡Œã®ç‰¹å®š**
```bash
# CloudWatch ãƒ­ã‚°ã§ã‚¨ãƒ©ãƒ¼ç¢ºèª
aws logs filter-log-events \
  --log-group-name "/aws/bedrock-agentcore/runtimes/agent_main-4h7OvMAtVL-DEFAULT" \
  --filter-pattern "POWER_AUTOMATE_WEBHOOK_URL" \
  --start-time $(date -v-1H +%s)000 \
  --region us-east-1

# çµæœ: "POWER_AUTOMATE_WEBHOOK_URL ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“"
```

2. **ä»®èª¬ã®ç«‹æ¡ˆ**
- AgentCore ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ç’°å¢ƒå¤‰æ•°ã‚’æŒ‡å®šã™ã‚‹æ–¹æ³•ãŒã‚ã‚‹ã¯ãš
- Docker ã‚„ Kubernetes ã¨åŒæ§˜ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒå­˜åœ¨ã™ã‚‹å¯èƒ½æ€§

3. **CLI ãƒ˜ãƒ«ãƒ—ã®ç¢ºèª**
```bash
agentcore launch --help | grep -i env
# ç™ºè¦‹: --env ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å­˜åœ¨
```

4. **å®Ÿè£…ã®è©³ç´°ç¢ºèª**
```bash
grep -r "env" /Users/$(whoami)/.pyenv/versions/*/lib/python*/site-packages/bedrock_agentcore_starter_toolkit/cli/runtime/commands.py
# ç¢ºèª: KEY=VALUE ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®å®Ÿè£…
```

5. **å®Ÿéš›ã®ãƒ†ã‚¹ãƒˆ**
```bash
agentcore launch --env POWER_AUTOMATE_WEBHOOK_URL="<url>" --auto-update-on-conflict
```

6. **å‹•ä½œç¢ºèª**
```bash
aws logs filter-log-events \
  --log-group-name "/aws/bedrock-agentcore/runtimes/agent_main-4h7OvMAtVL-DEFAULT" \
  --filter-pattern "TeamsæŠ•ç¨¿å®Œäº†" \
  --start-time $(date -v-5M +%s)000 \
  --region us-east-1
# çµæœ: "TeamsæŠ•ç¨¿å®Œäº† (HTTP 202)"
```

**å­¦ã‚“ã ã“ã¨**:
- CLI ãƒ˜ãƒ«ãƒ—ã¯æœ€ã‚‚ä¿¡é ¼ã§ãã‚‹æƒ…å ±æº
- æ—¢å­˜ã®çŸ¥è­˜ï¼ˆDockerç­‰ï¼‰ã‚’æ´»ç”¨ã—ãŸä»®èª¬ç«‹æ¡ˆãŒæœ‰åŠ¹
- æ®µéšçš„ãªæ¤œè¨¼ãŒé‡è¦

### ã‚±ãƒ¼ã‚¹2: ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹å•é¡Œã®è§£æ±º

**èƒŒæ™¯**:
- ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã§ã¯å‹•ä½œã™ã‚‹ã‚³ãƒ¼ãƒ‰
- AgentCore Runtime ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼

**èª¿æŸ»ãƒ—ãƒ­ã‚»ã‚¹**:

1. **ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®ç¢ºèª**
```bash
aws logs filter-log-events \
  --log-group-name "/aws/bedrock-agentcore/runtimes/agent_main-4h7OvMAtVL-DEFAULT" \
  --filter-pattern "ModuleNotFoundError" \
  --start-time $(date -v-1H +%s)000 \
  --region us-east-1
```

2. **ç’°å¢ƒã®é•ã„ã‚’åˆ†æ**
- ãƒ­ãƒ¼ã‚«ãƒ«: Python ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦èªè­˜
- AgentCore: ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ç›´æ¥å®Ÿè¡Œ

3. **è§£æ±ºç­–ã®å®Ÿè£…**
```python
# å¤‰æ›´å‰
from app.agentcore.teams_client import TeamsClient

# å¤‰æ›´å¾Œ
from .teams_client import TeamsClient
```

## ğŸ› ï¸ èª¿æŸ»ãƒ„ãƒ¼ãƒ«ã¨ã‚³ãƒãƒ³ãƒ‰

### åŸºæœ¬çš„ãªèª¿æŸ»ã‚³ãƒãƒ³ãƒ‰

#### AgentCore é–¢é€£

```bash
# åŸºæœ¬æƒ…å ±
agentcore --version
agentcore --help
agentcore status

# è¨­å®šç¢ºèª
cat app/agentcore/.bedrock_agentcore.yaml
ls -la app/agentcore/

# ãƒ­ã‚°ç¢ºèª
aws logs describe-log-groups --log-group-name-prefix "/aws/bedrock-agentcore"
aws logs tail /aws/bedrock-agentcore/runtimes/agent_main-4h7OvMAtVL-DEFAULT --since 1h
```

#### AWS ãƒªã‚½ãƒ¼ã‚¹ç¢ºèª

```bash
# èªè¨¼æƒ…å ±
aws sts get-caller-identity

# Bedrock é–¢é€£
aws bedrock list-foundation-models --region us-east-1
aws bedrock get-model-invocation-logging-configuration --region us-east-1

# ECR é–¢é€£
aws ecr describe-repositories --region us-east-1
aws ecr list-images --repository-name aws-exam-agent-runtime-development --region us-east-1

# IAM é–¢é€£
aws iam get-role --role-name BedrockAgentCoreExecutionRole-development
aws iam list-attached-role-policies --role-name BedrockAgentCoreExecutionRole-development
```

### é«˜åº¦ãªèª¿æŸ»ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯

#### 1. ãƒ­ã‚°ã®æ§‹é€ åŒ–æ¤œç´¢

```bash
# JSON ãƒ­ã‚°ã®è§£æ
aws logs filter-log-events \
  --log-group-name "/aws/bedrock-agentcore/runtimes/agent_main-4h7OvMAtVL-DEFAULT" \
  --start-time $(date -v-1H +%s)000 \
  --region us-east-1 \
  --query 'events[*].message' \
  --output text | jq -r 'select(type == "object") | .body'

# ç‰¹å®šãƒ‘ã‚¿ãƒ¼ãƒ³ã®æŠ½å‡º
aws logs filter-log-events \
  --log-group-name "/aws/bedrock-agentcore/runtimes/agent_main-4h7OvMAtVL-DEFAULT" \
  --filter-pattern "[timestamp, request_id, level, message]" \
  --start-time $(date -v-1H +%s)000 \
  --region us-east-1
```

#### 2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ

```bash
# å¿œç­”æ™‚é–“ã®åˆ†æ
aws logs filter-log-events \
  --log-group-name "/aws/bedrock-agentcore/runtimes/agent_main-4h7OvMAtVL-DEFAULT" \
  --filter-pattern "Invocation completed successfully" \
  --start-time $(date -v-1H +%s)000 \
  --region us-east-1 \
  --query 'events[*].message' \
  --output text | grep -o '[0-9]*\.[0-9]*s' | sed 's/s//' | awk '{sum+=$1; count++} END {print "Average:", sum/count, "seconds"}'

# ã‚¨ãƒ©ãƒ¼ç‡ã®è¨ˆç®—
SUCCESS=$(aws logs filter-log-events \
  --log-group-name "/aws/bedrock-agentcore/runtimes/agent_main-4h7OvMAtVL-DEFAULT" \
  --filter-pattern "Invocation completed successfully" \
  --start-time $(date -v-1H +%s)000 \
  --region us-east-1 \
  --query 'length(events)')

ERROR=$(aws logs filter-log-events \
  --log-group-name "/aws/bedrock-agentcore/runtimes/agent_main-4h7OvMAtVL-DEFAULT" \
  --filter-pattern "ERROR" \
  --start-time $(date -v-1H +%s)000 \
  --region us-east-1 \
  --query 'length(events)')

echo "Success: $SUCCESS, Error: $ERROR, Error Rate: $(echo "scale=2; $ERROR / ($SUCCESS + $ERROR) * 100" | bc)%"
```

#### 3. è¨­å®šã®å·®åˆ†ç¢ºèª

```bash
# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨æ¯”è¼ƒ
cp app/agentcore/.bedrock_agentcore.yaml /tmp/current_config.yaml
# å¤‰æ›´å¾Œ
diff /tmp/current_config.yaml app/agentcore/.bedrock_agentcore.yaml

# ç’°å¢ƒå¤‰æ•°ã®æ¯”è¼ƒ
python -c "
import os
from dotenv import load_dotenv
load_dotenv()
local_vars = {k: v for k, v in os.environ.items() if k.startswith(('AWS_', 'POWER_', 'BEDROCK_'))}
print('Local environment variables:')
for k, v in local_vars.items():
    print(f'  {k}: {v[:20]}...' if len(v) > 20 else f'  {k}: {v}')
"
```

## ğŸ“ èª¿æŸ»çµæœã®æ–‡æ›¸åŒ–

### èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```markdown
# èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ: [å•é¡Œã®æ¦‚è¦]

## å•é¡Œã®æ¦‚è¦
- **ç™ºç”Ÿæ—¥æ™‚**: 
- **ç—‡çŠ¶**: 
- **å½±éŸ¿ç¯„å›²**: 

## èª¿æŸ»ãƒ—ãƒ­ã‚»ã‚¹
1. **åˆæœŸç¢ºèª**
   - å®Ÿè¡Œã—ãŸã‚³ãƒãƒ³ãƒ‰
   - ç¢ºèªã—ãŸçµæœ

2. **è©³ç´°èª¿æŸ»**
   - èª¿æŸ»ã—ãŸæƒ…å ±æº
   - ç™ºè¦‹ã—ãŸäº‹å®Ÿ

3. **è§£æ±ºç­–ã®æ¤œè¨**
   - æ¤œè¨ã—ãŸé¸æŠè‚¢
   - é¸æŠã—ãŸç†ç”±

## è§£æ±ºç­–
- **å®Ÿè£…å†…å®¹**: 
- **å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰**: 
- **ç¢ºèªæ–¹æ³•**: 

## å­¦ã‚“ã ã“ã¨
- **æŠ€è¡“çš„ãªå­¦ã³**: 
- **ãƒ—ãƒ­ã‚»ã‚¹ã®æ”¹å–„ç‚¹**: 
- **ä»Šå¾Œã®äºˆé˜²ç­–**: 

## é–¢é€£ãƒªã‚½ãƒ¼ã‚¹
- å‚è€ƒã«ã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- é–¢é€£ã™ã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- æœ‰ç”¨ãªã‚³ãƒãƒ³ãƒ‰
```

### ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã®æ§‹ç¯‰

```bash
# èª¿æŸ»çµæœã®ä¿å­˜
mkdir -p docs/investigations
echo "# èª¿æŸ»å±¥æ­´" > docs/investigations/README.md

# å€‹åˆ¥ã®èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ
cat > docs/investigations/$(date +%Y%m%d)_environment_variables.md << 'EOF'
# ç’°å¢ƒå¤‰æ•°è¨­å®šæ–¹æ³•ã®èª¿æŸ»

## å•é¡Œ
AgentCore Runtime ã§ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œãªã„

## è§£æ±ºç­–
`agentcore launch --env KEY=VALUE` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ä½¿ç”¨

## è©³ç´°
[èª¿æŸ»å†…å®¹ã‚’è¨˜è¼‰]
EOF
```

## ğŸ¯ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### åŠ¹ç‡çš„ãªèª¿æŸ»ã®ã‚³ãƒ„

1. **ä»®èª¬é§†å‹•å‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**
   - å•é¡Œã®åŸå› ã«ã¤ã„ã¦ä»®èª¬ã‚’ç«‹ã¦ã‚‹
   - ä»®èª¬ã‚’æ¤œè¨¼ã™ã‚‹æœ€å°é™ã®å®Ÿé¨“ã‚’è¨­è¨ˆ
   - çµæœã«åŸºã¥ã„ã¦ä»®èª¬ã‚’ä¿®æ­£

2. **æ®µéšçš„ãªæ¤œè¨¼**
   - è¤‡é›‘ãªå•é¡Œã‚’å°ã•ãªéƒ¨åˆ†ã«åˆ†è§£
   - å„éƒ¨åˆ†ã‚’å€‹åˆ¥ã«æ¤œè¨¼
   - å‹•ä½œã™ã‚‹éƒ¨åˆ†ã‹ã‚‰é †æ¬¡çµ„ã¿ç«‹ã¦

3. **è¨˜éŒ²ã®é‡è¦æ€§**
   - å®Ÿè¡Œã—ãŸã‚³ãƒãƒ³ãƒ‰ã¨çµæœã‚’è¨˜éŒ²
   - å¤±æ•—ã—ãŸè©¦è¡Œã‚‚å«ã‚ã¦æ–‡æ›¸åŒ–
   - ä»–ã®äººãŒå†ç¾ã§ãã‚‹å½¢ã§è¨˜éŒ²

4. **çŸ¥è­˜ã®å…±æœ‰**
   - èª¿æŸ»çµæœã‚’ãƒãƒ¼ãƒ ã§å…±æœ‰
   - é¡ä¼¼å•é¡Œã®äºˆé˜²ç­–ã‚’æ¤œè¨
   - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç¶™ç¶šçš„ãªæ›´æ–°

### é¿ã‘ã‚‹ã¹ãè½ã¨ã—ç©´

1. **æ€ã„è¾¼ã¿ã«ã‚ˆã‚‹èª¿æŸ»**
   - ã€Œã“ã†ã‚ã‚‹ã¹ãã€ã§ã¯ãªãã€Œå®Ÿéš›ã¯ã©ã†ã‹ã€ã‚’ç¢ºèª
   - å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è¨˜è¼‰ã‚’éµœå‘‘ã¿ã«ã—ãªã„

2. **è¡¨é¢çš„ãªè§£æ±º**
   - ç—‡çŠ¶ã ã‘ã§ãªãæ ¹æœ¬åŸå› ã‚’ç‰¹å®š
   - ä¸€æ™‚çš„ãªå›é¿ç­–ã¨æ’ä¹…çš„ãªè§£æ±ºç­–ã‚’åŒºåˆ¥

3. **å­¤ç«‹ã—ãŸèª¿æŸ»**
   - ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¨ã®æƒ…å ±å…±æœ‰ã‚’æ€ ã‚‰ãªã„
   - æ—¢å­˜ã®çŸ¥è­˜ã‚„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ´»ç”¨

---

**æœ€çµ‚æ›´æ–°**: 2025-08-17  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
